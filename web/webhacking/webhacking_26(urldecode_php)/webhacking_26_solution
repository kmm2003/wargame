소스코드를 살펴보면 get파라미터인자 id의 값에 admin이 들어가면 정규표현식에 의해 필터링이
되며 if문을 무사히 통과한 후에는 id값이 urldecode가 이루어진다.
이때 id값이 admin이면 문제가 해결된다.

제일 먼저드는 생각은 admin을 전부다 url 인코딩하여 값을 전송하는 것이다.
시도해보겠다. encodeURI('admin') == %61%64%6D%69%6E

( encode 값을 구하다 알게된 사실이 있는데 url 인코드 할때 %이후값은 아스키코드의 16진수를 따른다는 것이다! 앞으로 참고해야될 것 같다. (utf-8의 경우만 해당되는듯??) )

인코딩하여 전송해도 결국 서버쪽에서는 admin으로 자동으로 디코딩하여 실행하는 것 같다.

자바스크립트를 이용하여 admin사이에 인코딩값 하나를 넣어서 시도해보도록하겠다.

먼저 든 생각은 admin사이에 %0D(캐리지 리턴)을 넣어서 시도해보는 것이었다.
ad%0Dmi%0Dn와 같은 식으로 넣어 값을 보내보았다.

분명히 decodeURI를 하였을때 'admin'이라고 나와서 답일줄 알았는데.... no라는 문구조차 안나온다;;;;

아마 console창에서 값을 구했을 때랑 다르게 ad -> mi -> ni식 으로 캐리지리턴에 의해 값이 바뀌나보다;;

그래서 나는 aamin%0Dad 라는 식을 만들어 바로 위의 가설이 맞다면 이 값이 admin일 될것이고 드디어 풀었다고 생각했으나.....안된다...ㅠㅠ

아마 위에 두 줄은 모두 틀린 것 같다.

다시 초심으로 돌아가 생각을 해보아야 할 것 같다. 

문득 갑자기 유레카 처럼 떠오른 생각이 있다... ㅎㄷㄷ 미쳤따 소름

어짜피 서버에서 id파라미터 값을 url디코드를 한번해주는데 에초에 전송될떄 인코딩되어 전송되고 서버에서는 웹프로그램코드와 상관없이 자동으로 url디코드를 하여 파라미터값을 변환하여 프로그램의 변수로 사용하는데 여기서는 한번 변환된후 프로그램 코드에서 한번더 url디코드가 진행된다....그렇다면??

admin값을 url인코딩을 두번하여 전송하면 2번 디코딩되어 결국 id의 값이 admin이 될 것이다. 하하

시도해보자

%61%64%6D%69%6E을 인코딩하면

%2561%2564%256D%2569%256E 이 된다.

이것을 id값으로 넣어 전송해보겠다.

클리어!! ㅅㅅ




