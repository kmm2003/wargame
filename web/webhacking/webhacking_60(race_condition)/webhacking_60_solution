나의 idx는 43790이라고 한다.

소스를 보니
쿠키의 PHPSESSID 값이 정수가 아니면 access denied가 뜬다.
PHPSESSID는 당연히 정수값이 아니기 때문에 현재 access denied가 뜬다.

이 경우 PHPSESSID값을 정수인 1로 바꾸고 새로고침을 해보면 로그인을 다시하라고 뜨는데
다시 로그인을 하고 들어오면 세션id값이 1인 상태로 로그인이 유지되면서 access denied가
사라진다.

이후 코드를 다시 보면
1. mode 파라미터의 값이 auth이면 ./readme/[idx값].txt 경로의 파일의 내용을 보여주며
파일의 내용에 [idx값]이 포함되면 파일을 삭제 후 문제가 해결된다.

mode 파라미터 값이 auth가 아니면 ./readme/[idx값].txt 파일을 생성 후 파일에 idx값을 저장한다. 만약 클라이언트 ip값이 127.0.0.1 이 아니면 1초 후 파일이 삭제된다.

ip변조를 시도해보려했으나 도저히 답이 나오지 않았다...

그렇다면 이 문제는 레이스 컨디션 문제라고 추측해볼 수 있다.

문제 해결의 알고리즘은 간단하다.
mode 파라미터가 auth일때와 아닐때 두가지 경우로 상황이 나뉘며 하나는 파일 생성 하나는 읽는 역할을 하기 때문에 쓰레드를 이용하여 두가지를 동시에 같은 시간에 수행하면 문제가 해결될 것이다!!

쓰레드로 문제를 해결해도 되지만 나는 그냥 코드를 두 가지 짠 후 같이 돌려보도록 하겠다.

이렇게 해보려했으나....안되서 결국 파이어폭스를 다운로드 받아

두 개의 브라우저를 이용하여 하나는 auth일때 하나는 아닐때로 세팅 후 
아닐때 부터 먼저 전송해 차례대로 빠르게 전송해보았다.

클리어!!(auth일때 페이지에서 클리어되었다!! ㅎㅎ)






